rewrite: foo1P1?P2??A?B ===> foo2P1?P2??A?B
